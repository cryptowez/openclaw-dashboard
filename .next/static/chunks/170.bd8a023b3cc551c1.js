"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{1170:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var a=r(7437),n=r(2265),s=r(8755);let l=(0,s.Z)("git-pull-request",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]]),c=(0,s.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),i=(0,s.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),o=(0,s.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),d=(0,s.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function h(e){let{owner:t,repo:r,branch:s="main",pendingChanges:h=[],onPullComplete:u}=e,[g,p]=(0,n.useState)("idle"),[m,y]=(0,n.useState)("idle"),[f,x]=(0,n.useState)(""),[b,k]=(0,n.useState)(""),[v,w]=(0,n.useState)([]),N=async()=>{p("loading"),x("");try{var e;let a=await fetch("/api/git?action=list&owner=".concat(encodeURIComponent(t),"&repo=").concat(encodeURIComponent(r),"&branch=").concat(encodeURIComponent(s))),n=await a.json();if(!a.ok)throw Error(null!==(e=n.error)&&void 0!==e?e:"Pull failed");w(n.files),null==u||u(n.files),x("✓ Fetched ".concat(n.files.length," files").concat(n.truncated?" (truncated)":"")),p("success")}catch(e){x(e instanceof Error?e.message:"Pull failed"),p("error")}},j=async()=>{if(!b.trim()){x("Please enter a commit message.");return}if(0===h.length){x("No pending changes to push.");return}y("loading"),x("");try{for(let a of h){var e;let n=v.find(e=>e.path===a.path),l=await fetch("/api/git",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"push",owner:t,repo:r,path:a.path,content:a.content,message:b,branch:s,sha:null==n?void 0:n.sha})}),c=await l.json();if(!l.ok)throw Error(null!==(e=c.error)&&void 0!==e?e:"Push failed")}x("✓ Pushed ".concat(h.length," file(s) — commit: ").concat(b)),k(""),y("success")}catch(e){x(e instanceof Error?e.message:"Push failed"),y("error")}};return(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l,{className:"h-5 w-5 text-blue-400"}),(0,a.jsxs)("h3",{className:"font-semibold text-sm",children:["Git Operations —"," ",(0,a.jsxs)("span",{className:"font-mono text-gray-300",children:[t,"/",r]})," ",(0,a.jsxs)("span",{className:"text-gray-500",children:["(",s,")"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:N,disabled:"loading"===g,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 rounded text-sm",children:[(0,a.jsx)(c,{className:"h-4 w-4 ".concat("loading"===g?"animate-spin":"")}),"loading"===g?"Pulling…":"Pull / Sync"]}),v.length>0&&(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[v.length," files in tree"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",value:b,onChange:e=>k(e.target.value),placeholder:"Commit message…",className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-sm focus:outline-none focus:border-blue-500",disabled:"loading"===m}),(0,a.jsxs)("button",{onClick:j,disabled:"loading"===m||0===h.length,className:"flex items-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-700 rounded text-sm",children:[(0,a.jsx)(i,{className:"h-4 w-4 ".concat("loading"===m?"animate-pulse":"")}),"loading"===m?"Pushing…":"Push".concat(h.length>0?" (".concat(h.length,")"):"")]})]}),f&&(0,a.jsxs)("div",{className:"flex items-start gap-2 text-xs rounded px-3 py-2 ".concat("error"===g||"error"===m?"bg-red-900/50 text-red-300":"bg-green-900/50 text-green-300"),children:["error"===g||"error"===m?(0,a.jsx)(o,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}):(0,a.jsx)(d,{className:"h-3.5 w-3.5 mt-0.5 shrink-0"}),f]})]})}},8755:function(e,t,r){r.d(t,{Z:function(){return h}});var a=r(2265);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),c=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:h,iconNode:u,...g}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:c?24*Number(l)/Number(s):l,className:n("lucide",d),...!h&&!o(g)&&{"aria-hidden":"true"},...g},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(h)?h:[h]])}),h=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:i,...o}=r;return(0,a.createElement)(d,{ref:l,iconNode:t,className:n("lucide-".concat(s(c(e))),"lucide-".concat(e),i),...o})});return r.displayName=c(e),r}}}]);