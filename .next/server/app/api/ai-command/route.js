"use strict";(()=>{var e={};e.id=164,e.ids=[164],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1179:(e,o,t)=>{t.r(o),t.d(o,{originalPathname:()=>g,patchFetch:()=>k,requestAsyncStorage:()=>m,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var a={};t.r(a),t.d(a,{POST:()=>d});var r=t(9303),n=t(8716),s=t(670),i=t(7070);let p={"claude-3-haiku":"anthropic/claude-3-haiku","claude-3.5-haiku":"anthropic/claude-3.5-haiku","gpt-4o-mini":"openai/gpt-4o-mini","gemini-flash-1.5":"google/gemini-flash-1.5","claude-3.5-sonnet":"anthropic/claude-3.5-sonnet","gpt-4o":"openai/gpt-4o","gemini-pro-1.5":"google/gemini-pro-1.5","claude-3-opus":"anthropic/claude-3-opus","o3-mini":"openai/o3-mini","deepseek-r1":"deepseek/deepseek-r1","llama-3.1-70b":"meta-llama/llama-3.1-70b-instruct"},c=async(e,o,t,a=2e3)=>{let r=p[e]??e,n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.OPENROUTER_API_KEY}`,"HTTP-Referer":"https://github.com/cryptowez/openclaw-dashboard","X-Title":"OpenClaw Dashboard"},body:JSON.stringify({model:r,messages:[{role:"system",content:o},{role:"user",content:t}],max_tokens:a})});if(!n.ok){let e=await n.json();throw Error(e?.error?.message??"OpenRouter API error")}let s=await n.json();return{content:s.choices[0].message.content,model:r,tokensUsed:s.usage?.total_tokens??0}};async function d(e){try{let{projectName:o,command:t,model:a,context:r}=await e.json();if(!t.trim())return i.NextResponse.json({error:"Command cannot be empty"},{status:400});let n=`You are an expert developer helping to modify and improve the "${o}" project. Your role is to:
1. Generate code modifications based on user requests
2. Provide clear, production-ready code snippets
3. Suggest improvements and best practices
4. Keep token usage minimal by being concise
5. Always provide complete, working code
${r?`
Context about the project:
${r}`:""}`,s=await c(a,n,t,2e3);return i.NextResponse.json({result:s.content,model:s.model,projectName:o,tokensUsed:s.tokensUsed})}catch(e){return console.error("AI Command error:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Failed to process AI command"},{status:500})}}let u=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/ai-command/route",pathname:"/api/ai-command",filename:"route",bundlePath:"app/api/ai-command/route"},resolvedPagePath:"/home/runner/work/openclaw-dashboard/openclaw-dashboard/app/api/ai-command/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:h}=u,g="/api/ai-command/route";function k(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var o=require("../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),a=o.X(0,[276,972],()=>t(1179));module.exports=a})();