"use strict";(()=>{var e={};e.id=727,e.ids=[727],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},75:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>j,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>l});var n=r(9303),o=r(8716),a=r(670),i=r(7070);let u="https://api.github.com";function p(){let e=process.env.GITHUB_TOKEN;return{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28",...e?{Authorization:`Bearer ${e}`}:{}}}async function c(e){let{searchParams:t}=new URL(e.url),r=t.get("action"),s=t.get("owner"),n=t.get("repo");if(!s||!n)return i.NextResponse.json({error:"owner and repo are required"},{status:400});try{if("list"===r){let e=t.get("branch")??"HEAD",r=await fetch(`${u}/repos/${s}/${n}/git/trees/${e}?recursive=1`,{headers:p()});if(!r.ok){let e=await r.json();return i.NextResponse.json({error:e.message??"GitHub API error"},{status:r.status})}let o=await r.json(),a=o.tree.filter(e=>"blob"===e.type).map(({path:e,sha:t,size:r})=>({path:e,sha:t,size:r}));return i.NextResponse.json({files:a,truncated:o.truncated??!1})}if("file"===r){let e=t.get("path"),r=t.get("branch")??"";if(!e)return i.NextResponse.json({error:"path is required"},{status:400});let o=`${u}/repos/${s}/${n}/contents/${e}${r?`?ref=${r}`:""}`,a=await fetch(o,{headers:p()});if(!a.ok){let e=await a.json();return i.NextResponse.json({error:e.message??"GitHub API error"},{status:a.status})}let c=await a.json(),l=Buffer.from(c.content,"base64").toString("utf-8");return i.NextResponse.json({path:e,content:l,sha:c.sha,encoding:"utf-8"})}return i.NextResponse.json({error:`Unknown action: ${r}`},{status:400})}catch(e){return i.NextResponse.json({error:e instanceof Error?e.message:"Internal error"},{status:500})}}async function l(e){try{let t=await e.json(),{action:r}=t;if("push"!==r)return i.NextResponse.json({error:`Unknown action: ${r}`},{status:400});let{owner:s,repo:n,path:o,content:a,message:c,branch:l,sha:d}=t;if(!s||!n||!o||null==a||!c)return i.NextResponse.json({error:"owner, repo, path, content, and message are required"},{status:400});let h={message:c,content:Buffer.from(a).toString("base64"),...l?{branch:l}:{},...d?{sha:d}:{}},f=await fetch(`${u}/repos/${s}/${n}/contents/${o}`,{method:"PUT",headers:{...p(),"Content-Type":"application/json"},body:JSON.stringify(h)});if(!f.ok){let e=await f.json();return i.NextResponse.json({error:e.message??"GitHub API error"},{status:f.status})}let g=await f.json();return i.NextResponse.json({path:o,sha:g.content.sha,commit:g.commit.sha,message:g.commit.message})}catch(e){return i.NextResponse.json({error:e instanceof Error?e.message:"Internal error"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/git/route",pathname:"/api/git",filename:"route",bundlePath:"app/api/git/route"},resolvedPagePath:"/home/runner/work/openclaw-dashboard/openclaw-dashboard/app/api/git/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:g}=d,m="/api/git/route";function j(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972],()=>r(75));module.exports=s})();